\section{Methods}\label{sr.meth}
We conducted a scoping review according to the PRISMA extension for scoping reviews
(Appendix~\ref{app.sr.prisma}).
%===================================================================================================
\subsection{Conceptual Framework for Risk Heterogeneity}\label{sr.meth.fw}
We defined ``factors of risk heterogeneity'' as
epidemiological phenomena and stratifications of populations, rates, or probabilities
which may/not be included in transmission models.
We defined 4 domains in which such factors might influence the transmission impact of ART:
\begin{itemize}
  \item \textbf{Biological Effects:}
  differential transmission risk within HIV disease course
  that may coincide with differential ART coverage
  \cite{Pilcher2004}
  \item \textbf{Behaviour Change Effects:}
  differential transmission risk due to
  behavioural changes related to engagement in the ART cascade
  \cite{Ramachandran2016,Tiwari2020}
  \item \textbf{Network Effects:}
  differential transmission risk within sub-populations
  that increases the challenge of epidemic control through core group dynamics
  \cite{Boily1997,Watts2010,Dodd2010}
  \item \textbf{Cascade Effects:}
  differential transmission risk within sub-populations
  who experience barriers to ART care and achieving viral suppression,
  such as youth and key populations
  \cite{Mountain2014,Lancaster2016,Hakim2018,Green2020}
\end{itemize}
We then compiled a list of key factors of risk heterogeneity,
and their possible mechanisms of influence on ART prevention impact (Table~\ref{tab:sr.factors}).
\begin{sidewaystable}
  \centering
  \caption{Factors of heterogeneity in HIV transmission
  and their possible mechanisms of influence on the prevention impact of ART interventions}
  \label{tab:sr.factors}
  \input{sr/tab.factors}
\end{sidewaystable}
%===================================================================================================
\subsection{Search}\label{sr.meth.search}
We searched MEDLINE and EMBASE via Ovid
using search terms related to Sub-Saharan Africa (SSA), HIV, and transmission modelling
(Table~\ref{tab:sr.search}).
Search results were de-duplicated and screened by title and abstract in Covidence \cite{Covidence},
followed by full-text screening using the criteria below.
One reviewer (JK) conducted the search, screening, and data extraction.
%---------------------------------------------------------------------------------------------------
\subsubsection{Inclusion/Exclusion Criteria}\label{sr.meth.search.inex}
Table~\ref{tab:sr.criteria} lists complete inclusion/exclusion criteria and related definitions.
We included peer-reviewed, primary modelling studies that used
non-linear compartmental models of sexual HIV transmission
to project the prevention impacts of ART in any setting within SSA.
We included studies published in English anytime before Jan~1, 2020,
that simulated at least one scenario with increasing ART coverage,
possibly alongside other interventions.
The included studies formed \srds{A}, used to complete objectives \ref{sr.rq.1}~and~\ref{sr.rq.2}.
A subset of \srds{A} formed \srds{B}, used to complete objective~\ref{sr.rq.3}.
Studies in \srds{B} met three additional criteria:
1) examined scale-up of ART coverage alone (versus combination intervention);
2) examined ART intervention for the whole population (versus ART prioritized to subgroups); and
3) reported HIV incidence reduction and/or cumulative HIV infections averted
relative to a base-case scenario reflecting status quo.
%===================================================================================================
\subsection{Data Extraction}\label{sr.meth.data}
Data extraction used the full text and all available supplementary material.
Data were extracted per-study for objectives \ref{sr.rq.1}~and~\ref{sr.rq.2}, and
per-scenario for objective~\ref{sr.rq.3}, possibly including multiple time horizons.
Detailed variables definitions are given in Appendix~\ref{app.sr.defs}.
%---------------------------------------------------------------------------------------------------
\subsubsection{Epidemic Context}\label{sr.meth.data.context}
For objective~\ref{sr.rq.1}, we extracted data on
geography, epidemic phase, and key populations explicitly considered in the model.
We categorized studies by country, SSA region, and
scale of the simulated population (city, sub-national, national, regional).
We classified epidemic size at time of ART intervention using
overall HIV prevalence (low: $<$1\%, medium: 1-10\%, high: $>$10\%),
and epidemic phase using overall HIV incidence trend
(increasing, increasing-but-stabilizing, stable/equilibrium, decreasing-but-stabilizing, and decreasing).
\par
We extracted whether any of the following key populations were modelled:
female sex workers (FSW);
male clients of FSW (Clients);
men who have sex with men (MSM);
transgender individuals;
people who inject drugs (PWID);
and prisoners.
FSW were defined as any female activity group meeting 3 criteria:
{$<$5\%} of the female population;
{$<$1/3} the client population size; and
having {$>$50$\times$} the partners per year of
the lowest sexually active female activity group \cite{Vandepitte2006,Scorgie2012}.
Clients were defined as any male activity group
described as clients of FSW, and being {$>$3$\times$} the FSW population size.
We also extracted whether any groups in the model were described as
MSM, transgender, PWID, or prisoners.
%---------------------------------------------------------------------------------------------------
\subsubsection{Factors of Risk Heterogeneity}\label{sr.meth.data.factors}
For objective~\ref{sr.rq.2}, we examined if/how
the factors of risk heterogeneity outlined in Table~\ref{tab:sr.factors}
were simulated in each study.
We examined the number of \emph{risk groups} defined by sex/gender and/or sexual activity, and
any \emph{turnover} of individuals between activity groups and/or key populations.
\par
We classified how \emph{partnership types} were defined:
generic (all partnerships equal);
based only on the activity groups involved;
or overlapping, such that different partnership types could be formed between the same two activity groups.
We extracted whether partnerships considered different
numbers of sex acts and condom use,
and whether models simulated any degree of assortative \emph{mixing} by activity groups
(preference for like-with-like) versus proportionate (random) mixing.
The number of \emph{age groups} was extracted, and whether \emph{mixing} by age groups was
proportionate, strictly assortative, or assortative with age differences.
We extracted whether age conferred any transmission risk beyond mixing,
such as different partnership formation rates.
\par
Finally, we extracted whether rates of HIV diagnosis, ART initiation, and/or ART discontinuation
differed across risk strata (sex/gender, activity, key populations, and/or age),
and if so, how they differed.
%---------------------------------------------------------------------------------------------------
\subsubsection{Prevention Impact of ART Scale-Up}\label{sr.meth.data.api}
For objective~\ref{sr.rq.3}, we extracted
the following data for each intervention scenario within \srds{B}:
the years that ART scale-up started ($t_0$) and stopped ($t_f$);
the final overall ART coverage achieved and/or
the final ART initiation rate (per person-year among PLHIV not yet in care);
the criteria for ART initiation (e.g.\ CD4 count); and
the relative reduction in transmission probability on ART.
Then, we extracted the
relative reduction in incidence and/or proportion of infections averted
relative to the base-case scenario for available time horizons since $t_0$.
\par
We conducted an ecological analyses across all modelled scenarios to examine the relationship between
factors of risk heterogenetiy and projected ART impacts,
adjusting for other factors that could influence impacts.
For each factor of risk heterogeneity, we compared
projected ART impacts (incidence reduction/infections averted)
across different factor levels (whether or not, and how the factor was modelled).
We estimated the effect of each factor level on ART impacts
using linear multivariate regression, with generalized estimating equations \cite{Hojsgaard2006}
to control for clustering due to multiple estimates per study/scenario.
Time since $t_0$ was included as a covariate, and two variables were removed due to missingness.
No variable selection was used to avoid biasing effect estimates \cite{Harrell2001}.
We also plotted impacts versus time since $t_0$, stratified by factor levels.
